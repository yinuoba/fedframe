/*! fedframe - v0.1.0 
* https://www.yrz.cn/
* Copyright (c) 2014 Front-End development team of UPG Cloud Financing Department; Licensed MIT */
define("validate/validate",["tipsy/tipsy"],function(a,b){function c(a,b){var c=b&&b.show?!0:!1,d=b&&b.unFocus?!0:!1,f=b&&b.gravity?b.gravity:"w",g=b&&b.html?b.html:!0,h=b&&b.offset?b.offset:0,i=a.attr(null==a.attr("name")?"valid-msg":"name"),j=b&&b.msgHolderId?b.msgHolderId:!1,k=b.width,l="";if(a.parents("form").length){var m=a.parents("form");if(l=m.attr("name")||m.attr("id"),!l){var n=Math.ceil(1e4*Math.random());l="randomId-"+n}}if(i=null==i?a.attr("id"):i,j){var o=a.attr("valid-msg-text");a=$("#"+j),a.attr("valid-msg-text",o)}a.tipsy({title:"valid-msg-text",trigger:"manual",gravity:f,fade:!0,color:"red",opacity:1,html:g,offset:h,id:i,formId:l,width:k});var p=!1;return d||(p=e(a)),c&&setTimeout(function(){a.tipsy("show"),a.is("input")&&a.addClass("textMess_bd")},10),p}function d(a){try{if(a)if("object"==typeof a){if("function"==typeof a.tipsy){var b=a.tipsy("tip");b.hide()}}else $("[tipsyid='"+a+"']").remove();else $("[tipsy].tipsy-red").remove()}catch(c){}}function e(a){var b=!1;try{var c=$("#colorbox:visible");!c.length,setTimeout(function(){var b=a.attr("tabindex");a.is(":input")?a.focus():(a.attr("tabindex","-1"),a.is(":visible")||a.append("&nbsp;"),a.focus(),b?a.attr("tabindex",b):a.removeAttr("tabindex"))},1),b=!0}catch(d){}return b}function f(a){var b=!1,c=$("[tipsy]");if(a){var d=a.attr("name")||a.attr("id");c=$("[tipsy][tipsyformId="+d+"]")}return c.each(function(){$(this).is(":visible")&&(b=!0)}),b}function g(a){for(var b=a,c=0;c<b.length;c++)if(b.charAt(c)<"0"||b.charAt(c)>"9")return!1;var d=b.substr(6,2),e=b.substr(8,2),f=b.substr(10,2);return"01">d||d>"90"?!1:"01">e||e>"12"?!1:"01">f||f>"31"?!1:!0}function h(a){for(var b=new Array("7","9","10","5","8","4","2","1","6","3","7","9","10","5","8","4","2"),c=new Array("1","0","X","9","8","7","6","5","4","3","2"),d=a,e=d.substr(0,17),f=d.substr(17),g=0,h=0;17>h;h++){if(e.charAt(h)<"0"||e.charAt(h)>"9")return!1;g+=parseInt(e.charAt(h))*parseInt(b[h])}var i=parseInt(g)%11;return"X"==f&&(f=f.toLocaleUpperCase()),c[i]==f?!0:!1}a("tipsy/tipsy"),function(a){var b,d=!1,e={required:{regex:/[^(^\s*)|(\s*$)]/,msg:"此项必填"},email:{regex:/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,msg:"邮箱格式不正确。参考格式: wzp@upg.cn"},qq:{regex:/^\d+$/,msg:"qq号码必须是1位以上的数字"},url:{msg:"链接格式不正确。参考格式：http://www.ifsc.com.cn"},id:{msg:"此项必填"},lengthRange:{msg:"密码长度为 #0# 到 #1#"},notMatch:{msg:"please enter a value differnt from '#0#'"},match:{msg:"please enter a value match with '#0#' field"},realname:{regex:/^[\u0391-\uFFE5A-Za-z0-9_-]+$/,msg:"中文,英文, 0-9, - and _"},alphanumeric:{regex:/^[A-Za-z0-9_-]+$/,msg:"英文, 0-9, - and _"},idcard:{msg:"身份证号码错误"},mobile:{regex:/^[1][3,4,5,8]\d{9}$/,msg:"手机号码格式错误"},phone:{regex:/^((\d{4}|\d{3})-(\d{7,8})|(\d{4}|\d{3})-(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1})$)$/,msg:"座机号码格式错误,格式 0571-88888888"},mobileOrPhone:{msg:"此项格式为手机或座机号码"},areaPart:{regex:/^0\d{2}$|^0\d{3}$/,msg:"区号格式错误"},phonePart:{regex:/^((\d{7,8})|(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1})$)$/,msg:"座机号码格式错误"},year:{regex:/^[1,2][0,9]\d{2}$/,msg:"年格式填写错误！"},month:{regex:/^[0,1]\d{1}$|^\d{1}$/,msg:"月格式填写错误！"},day:{regex:/^[0,1,2,3]\d{1}$|^\d{1}$/,msg:"日格式填写错误！"},number:{msg:"此项为数字格式"},notAllNum:{regex:/^\d+$/,msg:"不能全为数字"},uploadImg:{msg:"图片类型错误"},uploadFile:{msg:"附件类型错误"},uploadFileImg:{msg:"附件类型错误"},uploadSound:{msg:"录音类型错误"},maxValue:{msg:"请输入数字小于  #0#"},minValue:{msg:"请输入数字大于  #0#"},maxDecimal:{msg:"有效数字不多于 #0#"}},f=function(b,e,f){try{b.tipsy("hide")}catch(g){}b.is(":visible")?b.attr("valid-msg-text",f):b.parent().attr("valid-msg-text",f);var h=null==b.attr("valid-msg-options")?{}:a.parseJSON(b.attr("valid-msg-options"));a.extend(h,{show:!0});var i=!1;d&&a.extend(h,{unFocus:!0}),i=c(b.is(":visible")?b:b.parent(),h),d||(d=i)},i=function(c,d){var e=a('[name="'+c+'"]',b).length>0?a('[name="'+c+'"]',b):a("#"+c);return e=e.size()>0?e:a("[valid-name="+c+"]"),d&&(e=e.filter(":visible")),e};a.fn.valid=function(c){if(!a(this).attr("valid"))return!1;b=c||a("body");var d=a(this),j=d.attr("valid").split("|")[0].split(","),k=d.attr("valid").split("|")[1]?d.attr("valid").split("|")[1].split(","):[],l=("radio"==(d.attr("type")||"").toLowerCase()?a("[name="+d.attr("name")+"]:checked").val():d.val())||"",m=l.length,n=d.attr("name")||d.attr("valid-name"),o=!0;if(a.each(j,function(b,c){c=a.trim(c);var j;if(c.indexOf("@")>=0&&(j=c.split("@")[1],c=c.split("@")[0]),"ajax"==c){var p={};p[n]=l,a.ajax({type:"post",url:j,data:p,dataType:"json",cache:!1,async:!1,success:function(a){return"0"==a.boolen?(f(d,n,a.message),o=!1,!1):void 0}})}else{var q=k[b]||e[c].msg;if("lengthRange"==c){var r=j.split("~")[0],s=j.split("~")[1];if(r>m||m>s)return q=q.replaceAll("#0#",r),q=q.replaceAll("#1#",s),f(d,n,q),o=!1,!1}else if("number"==c){if(isNaN(l)||l.indexOf("+")>=0)return f(d,n,q),o=!1,!1}else if("notAllNum"==c){if(0==l.length)return o=!0;var t=e.notAllNum.regex.test(l);if(t)return f(d,n,q),o=!1,!1}else if("notMatch"==c){if(l==i(j).val())return q=q.replaceAll("#0#",i(j).val()),f(d,n,q),o=!1,!1}else if("minValue"==c){if(isNaN(j)&&(j=i(j).val()),j&&parseFloat(l)<=parseFloat(j))return q=q.replaceAll("#0#",j),f(d,n,q),o=!1,!1}else if("maxValue"==c){if(isNaN(j)&&(j=i(j).val()),j&&parseFloat(l)>parseFloat(j))return q=q.replaceAll("#0#",j),f(d,n,q),o=!1,!1}else if("maxDecimal"==c){var u=parseFloat(l).toFixed(j);if(l/u>1)return q=q.replaceAll("#0#",j),f(d,n,q),o=!1,!1}else if("match"==c){if(l!=i(j).val())return q=q.replaceAll("#0#",i(j).attr("name")),f(d,n,q),o=!1,!1}else if("id"==c){n=j?j:n;var v=i(n);if(l=v.is(":radio")||v.is(":checkbox")?v.filter(":checked").val():v.val(),null===l||void 0===l||""===l||0>l)return f(d,n,q),o=!1,!1}else if("idcard"==c){if(0==l.length)return o=!0;if(o=!1,15==l.length?o=g(l):18==l.length&&(o=h(l)),!o)return f(d,n,q),!1}else if("url"==c){if(0==l.length)return o=!0;if(o=!1,(-1!==l.indexOf("http://")||-1!==l.indexOf("https://"))&&(o=!0),!o)return f(d,n,q),!1}else if("uploadImg"==c){var v=d||i(n);if(l||(n=j?j:n,l=v.is(":radio")||v.is(":checkbox")?v.filter(":checked").val():v.val()),0==l.length)return!0;var w=l.split(".").pop().toLowerCase(),x=["jpg","gif","png","jpeg","bmp"];-1==a.inArray(w,x)&&(v.replaceWith(v.val("").clone(!0)),v=i(n,!0),v.removeData("tipsy"),f(v,n,q),o=!1)}else if("uploadFile"==c){var v=d||i(n);if(l||(n=j?j:n,l=v.is(":radio")||v.is(":checkbox")?v.filter(":checked").val():v.val()),0==l.length)return!0;var w=l.split(".").pop().toLowerCase(),x=["zip","rar","doc","xls","ppt","docx","xlsx","pptx","pdf","htm","html","wps","et","dps","txt"];-1==a.inArray(w,x)&&(v.replaceWith(v.val("").clone(!0)),v=i(n,!0),v.removeData("tipsy"),f(v,n,q),o=!1)}else if("uploadFileImg"==c){var v=d||i(n);if(l||(n=j?j:n,l=v.is(":radio")||v.is(":checkbox")?v.filter(":checked").val():v.val()),0==l.length)return!0;var w=l.split(".").pop().toLowerCase(),x=["zip","rar","doc","xls","ppt","docx","xlsx","pptx","pdf","htm","html","wps","et","dps","jpg","gif","png","jpeg","bmp","txt"];-1==a.inArray(w,x)&&(v.replaceWith(v.val("").clone(!0)),v=i(n,!0),v.removeData("tipsy"),f(v,n,q),o=!1)}else if("uploadSound"==c){var v=d||i(n);if(l||(n=j?j:n,l=v.is(":radio")||v.is(":checkbox")?v.filter(":checked").val():v.val()),0==l.length)return!0;var w=l.split(".").pop().toLowerCase(),x=["mp3","wma","flac","aac","mmf","amr","m4a","m4r","ogg","mp2","wav","wv"];-1==a.inArray(w,x)&&(v.replaceWith(v.val("").clone(!0)),v=i(n,!0),v.removeData("tipsy"),f(v,n,q),o=!1)}else if("mobileOrPhone"==c){if(0==l.length)return o=!0;var y=e.phone.regex.test(l),z=e.mobile.regex.test(l);if(!y&&!z)return f(d,n,q),o=!1,!1}else if("year"==c){if(0==l.length)return o=!0;var A=e.year.regex.test(l);if(!A)return f(d,n,q),o=!1,!1}else if("month"==c){if(0==l.length)return o=!0;var B=e.month.regex.test(l);if(!B)return f(d,n,q),o=!1,!1}else if("day"==c){if(0==l.length)return o=!0;var C=e.day.regex.test(l);if(!C)return f(d,n,q),o=!1,!1}else if("areaPart"==c){if(0==l.length)return o=!0;var D=e.areaPart.regex.test(l);if(!D)return f(d,n,q),o=!1,!1}else if("phonePart"==c){if(0==l.length)return o=!0;var E=e.phonePart.regex.test(l);if(!E)return f(d,n,q),o=!1,!1}else{if("required"!=c&&0==l.length)return o=!0,!0;if(!d.is(":disabled")&&!e[c].regex.test(l))return f(d,n,q),o=!1,!1;if("realname"==c){var F=["～","！","＠","＃","＄","％","︿","＆","＊","（","）","＿","＋","‵","－","＝","［","］","＼","｛","｝","｜","；","’","：","＂","，","。","／","＜","＞","？"];for(b in F)if(l.indexOf(F[b])>=0)return f(d,n,q),o=!1,!1}}}}),o)try{d.tipsy("hide")}catch(p){}return o}}(jQuery);var i=function(a,b){b=b||a;var c=!0,d=!1;return $("[valid]",a).each(function(){var a=$(this);a.is(":visible")?(c=a.valid(b)&&c,c||d||(d=e(a))):void 0!=a.attr("valid-hide")&&(c=a.valid(b)&&c,c||d||(d=e(a)))}),c};b.createTipsyErr=c,b.removeErrorMsg=d,b.focusErr=e,b.isValidError=f,b.isChineseIdentifyNo15=g,b.isChineseIdentifyNo18=h,b.validForm=i,b.showErr=function(a,b,d){d="undefined"!=typeof d?!d:!1,a.attr("valid-msg-text",b);var e=null==a.attr("valid-msg-options")?{}:$.parseJSON(a.attr("valid-msg-options"));$.extend(e,{show:!0,unFocus:d}),c(a,e)}});