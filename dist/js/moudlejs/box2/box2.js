/*! fedframe - v0.1.0 
* https://www.yrz.cn/
* Copyright (c) 2014 Front-End development team of UPG Cloud Financing Department; Licensed MIT */
define("box2/box2",[],function(){!function(a){function b(){g=a(window),a("#box2").length&&a("#box2").remove(),h=a('<div class="box2" style="position:absolute; width:156px;" id="box2"><div class="box2borderDiv"><a class="box2closediv box2closeButton"></a><div class="box2contentDiv" style="margin:auto;"></div></div><div class="box2bgborderBottom"><span class="fl imgbgsLeft" ></span><span class="fl bgsbottom"></span><span class="fr imgbgsRight" ></span></div></div>').hide(),k=a('<div id="box2overlay" style="position:absolute; top:0; left:0; overflow:hidden; position:fixed; width:100%; height:100%; background: #000000;opacity:0;filter:alpha(opacity=0)"/>').hide(),a(document.body).append(k,h),i=a("#box2 .box2closeButton"),j=a("#box2 .box2contentDiv");var b=upgTool.getHighestZIndex();h.css("zIndex",b+1),k.css("zIndex",b),i.click(function(){a.box2.close()})}var c,d,e,f,g,h,i,j,k,l={autoPos:!1,success:!1,success_msg:"",success_callback:null,error:!1,error_msg:"",confirm:!1,confirm_msg:"",confirm_callback:a.noop,data:{},onComplete:a.noop,html:!1,htmlParent:!1,width:!1,onOpen:a.noop},m=a('<div id="box2Loading" style="text-align:center"><img src="/public/image/box2/loading.gif"></div>'),n=function(){var b=Math.round(Math.max(g.width()-h.outerWidth(),0)/2),c=Math.round(Math.max(g.height()-a(".box2borderDiv",h).outerHeight(),0)/2+g.scrollTop());return{top:c,left:b}};a.box2=a.fn.box2=function(f){var i=this;f=f||{},c=a.extend(c,l,f),b(),a("#box2").length&&c.width&&a("#box2").css("width",c.width);var n;if(c.success){var n=a('<div class="boxConWrap"/>');n.append('<p class="box_Pop"><img src="/public/image/pop/sprite_global_01.png" align="absmiddle" />&nbsp;'+c.success_msg+"</p>"),e=!0}else if(c.error){var n=a('<div class="boxConWrap"/>');n.append('<p class="box_Pop"><img src="/public/image/pop/sprite_global_02.png" align="absmiddle" />&nbsp;'+c.error_msg+"</p>"),e=!0}else if(c.confirm){var n=a('<div class="boxConWrap"/>');n.append('<table style="margin:0 auto" width="100%"><tr><td nowrap><p class="box_Pop"><img src="/public/image/pop/sprite_global_01.png" align="absmiddle" />'+c.confirm_msg+"</p></td></tr></table>");var o=a('<span class="btn_bor_orange"><input type="button" class="btn_text" value="确认"/></span>').click(function(){c.confirm_callback(c),upgTool.disableButton(a(this))}),p=a('<span class="btn_bor_lightblue ml20"><input type="button" class="btn_text" value="取消"/></span>').click(function(){a.box2.close()}),q=a("<div class='box_foot'></div>").append(o).append(p);n.append(q),e=!0}else if(c.html){var n=a("<div/>");c.styleCss&&n.css(c.styleCss),c.htmlParent=a(c.html).parent(),n.append(c.html),e=!0}else{var r="function"==typeof i?c.href:i.attr("href");e=!1,n=m.clone()}d=n.outerWidth(),j.append(n.show().removeClass("vh")),c.onOpen(),a.box2.resize();var s=!0;if(e){var t=n.find("img");t.length>0&&(s=!1,n.hide().addClass("vh"),j.append(upgTool.iconWaiting(!0,"box2Loading")),t.each(function(){a(this).attr("src",a(this).attr("src")+"?"+(new Date).getTime())}).load(function(){d=n.outerWidth(),a("img.box2Loading",j).remove(),n.show().removeClass("vh"),a.box2.resize(),c.onComplete(h)})),c.html&&(d=n.outerWidth(),a.box2.resize(),c.onComplete(h))}else{a("#box2").data("loaded",1);a.post(r,c.data,function(b){if(1==a("#box2").data("loaded")){a("#box2").data("loaded",0);var e=a('<div class="dn"/>').html(b);a(document.body).append(e),d=e.outerWidth(),j.append(e.show()),n.remove(),a.box2.resize(),c.onComplete(h)}})}k.show(),h.show(),e&&s&&c.onComplete(h),g.bind("resize.box2",function(){a.box2.resize()})},a.box2.success=function(b,c){a.box2.close(!0),c=c||a.noop();var d={success:!0,success_msg:b,success_callback:c};a.box2(d),f=setTimeout(a.box2.close,2e3)},a.box2.error=function(b){a.box2.close(!0);var c={error:!0,error_msg:b};a.box2(c)},a.box2.confirm=function(b){a.box2.close(!0),callback=b.callback||a.noop();var b={confirm:!0,confirm_msg:b.msg,confirm_callback:callback};a.box2(b)},a.box2.resize=function(){if(h){d>0&&(h.css("width",d+2),j.css("width",d));var a=n();h.css({top:a.top,left:a.left})}},a.box2.close=function(b){if(upgTool.removeErrorMsg(),h){clearTimeout(f),b=b||!1;var d=function(){k.hide(),!e||c.success||c.error||(c.htmlParent&&c.htmlParent.length?a(c.htmlParent).append(j.find(c.html).hide()):a(document.body).append(j.children().hide())),h.remove(),k.remove(),c.success&&c.success_callback&&"function"==typeof c.success_callback&&c.success_callback()};b?(h.hide(),d()):h.fadeOut(function(){d()})}}}(jQuery)});