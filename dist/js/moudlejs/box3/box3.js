/*! upgF2E - v0.1.0 
* https://www.yrz.cn/
* Copyright (c) 2014 Front-End development team of UPG Cloud Financing Department; Licensed MIT */
define("box3/box3",[],function(){!function(a){function b(){g=a(window),h=a('<div class="box2" style="position:absolute; width:156px;" id="box3"><div class="box2borderDiv"><a class="box2closediv box2closeButton"></a><div class="box2contentDiv"></div></div><div class="box2bgborderBottom"><span class="y_fl imgbgsLeft" ></span><span class="y_fl bgsbottom"></span><span class="fr imgbgsRight" ></span></div></div>').hide(),k=a('<div id="box3overlay" style="position:absolute; top:0; left:0; overflow:hidden; position:fixed; width:100%; height:100%; background: #fff;opacity:0.3;filter:alpha(opacity=2)"/>').hide(),a(document.body).append(k,h),i=a("#box3 .box2closeButton"),j=a("#box3 .box2contentDiv");var b=upgTool.getHighestZIndex();h.css("zIndex",b+1),k.css("zIndex",b),i.click(function(){a.box3.close()})}var c,d,e,f,g,h,i,j,k,l={autoPos:!1,success:!1,success_msg:"",success_callback:null,error:!1,error_msg:"",confirm:!1,confirm_msg:"",confirm_callback:a.noop,data:{},onComplete:a.noop,html:!1,htmlParent:!1,width:!1},m=a('<div id="box3Loading" style="text-align:center"><img src="/public/image/box2/loading.gif"></div>'),n=function(){var b=Math.round(Math.max(g.width()-h.outerWidth(),0)/2),c=Math.round(Math.max(g.height()-a(".box2borderDiv",h).outerHeight(),0)/2+g.scrollTop());return{top:c,left:b}};a.box3=a.fn.box3=function(f){var i=this;f=f||{},c=a.extend(c,l,f),b(),a("#box3").length&&c.width&&a("#box3").css("width",c.width);var n;if(c.success){var n=a('<div class="boxConWrap"/>');n.append('<p class="box_Pop"><img src="/public/image/pop/sprite_global_01.png" align="absmiddle" />&nbsp;'+c.success_msg+"</p>"),e=!0}else if(c.error){var n=a('<div class="boxConWrap"/>');n.append('<p class="box_Pop"><img src="/public/image/pop/sprite_global_02.png" align="absmiddle" />&nbsp;'+c.error_msg+"</p>"),e=!0}else if(c.confirm){var n=a('<div class="boxConWrap"/>');n.append('<table style="margin:0 auto" width="100%"><tr><td nowrap><p class="box_Pop"><img src="/public/image/pop/sprite_global_01.png" align="absmiddle" />'+c.confirm_msg+"</p></td></tr></table>");var o=a('<span class="btn_bor_orange"><input type="button" class="btn_text" value="确认"/></span>').click(function(){c.confirm_callback(c),upgTool.disableButton(a(this))}),p=a('<span class="btn_bor_lightblue ml20"><input type="button" class="btn_text" value="取消"/></span>').click(function(){a.box3.close()}),q=a("<div class='box_foot'></div>").append(o).append(p);n.append(q),e=!0}else if(c.html){var n=a("<div/>");c.htmlParent=a(c.html).parent(),n.append(c.html),e=!0}else{var r="function"==typeof i?c.href:i.attr("href");e=!1,n=m.clone()}d=n.outerWidth(),j.append(n.show().removeClass("vh")),c.tip_style&&n.css(c.tip_style),a.box3.resize();var s=!0;if(e){var t=n.find("img");t.length>0&&(s=!1,n.hide(),j.append(upgTool.iconWaiting(!0,"box3Loading")),t.each(function(){a(this).attr("src",a(this).attr("src")+"?"+(new Date).getTime())}).load(function(){d=n.outerWidth(),a("img.box3Loading",j).remove(),n.show(),a.box3.resize(),c.onComplete(h)})),c.html&&(d=n.outerWidth(),a.box3.resize(),c.onComplete(h))}else{a.post(r,c.data,function(b){var e=a('<div class="dn"/>').html(b);a(document.body).append(e),d=e.outerWidth(),j.append(e.show()),n.remove(),a.box3.resize(),c.onComplete(h)})}k.show(),h.show(),e&&s&&c.onComplete(h),g.bind("resize.box3",function(){a.box3.resize()})},a.box3.success=function(b,c,d){a.box3.close(!0),c=c||a.noop();var e={success:!0,success_msg:b,success_callback:c,tip_style:d};a.box3(e),f=setTimeout(a.box3.close,2e3)},a.box3.error=function(b,c){a.box3.close(!0);var d={error:!0,error_msg:b,tip_style:c};a.box3(d)},a.box3.confirm=function(b){a.box3.close(!0);var c=b.callback||a.noop(),d=b.tipStyle,b={confirm:!0,confirm_msg:b.msg,confirm_callback:c,tip_style:d};a.box3(b)},a.box3.resize=function(){if(h){d>0&&(h.css("width",d+2),j.css("width",d));var a=n();h.css({top:a.top,left:a.left})}},a.box3.close=function(b){if(upgTool.removeErrorMsg(),h){clearTimeout(f),b=b||!1;var d=function(){k.hide(),!e||c.success||c.error||(c.htmlParent&&c.htmlParent.length?a(c.htmlParent).append(j.find(c.html).hide()):a(document.body).append(j.children().hide())),h.remove(),k.remove(),c.success&&c.success_callback&&"function"==typeof c.success_callback&&c.success_callback()};b?(h.hide(),d()):h.fadeOut(function(){d()})}}}(jQuery)});