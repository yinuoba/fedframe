/*! upgF2E - v0.1.0 
* https://www.yrz.cn/
* Copyright (c) 2014 Front-End development team of UPG Cloud Financing Department; Licensed MIT */
define("industry/industry.css",[],function(){seajs.importStyle(".del{background:url(/public/image/industry/close.gif) no-repeat}.choose{width:100%;position:relative;z-index:580}.choose .cntBoxMain{color:#7d5d4e;position:absolute;z-index:999;right:87px;top:-73px;width:450px;min-height:48px;z-index:10}.choose .cntBoxMain img{float:none}.choose .cntBoxMainCenter{border:1px solid #85c9ff;background-color:#d9e5ee}.choose .cntBoxMainCenter #titlebar{background:#5aa3dd;color:#fff;font-size:14px;font-family:SinSun;font-weight:400}.choose .cntBoxMainCenter p{width:270px}.choose .btn{background:url(/public/image/industry/choose_btn.png) no-repeat;border:0;width:57px;height:22px;color:#fff}.choose .cntBoxMainCenter .text{width:200px;height:22px}.choose ul{list-style:none;padding:0;margin:0;overflow:hidden}.choose ul li{width:200px;line-height:27px}.choose .del{position:absolute;right:100px;top:-60px;cursor:pointer;z-index:9999;display:inline-block;width:11px;height:11px;background-position:-7px -235px}.choose .cntBoxMainCenter01{width:447px;margin:10px 0 0;min-height:300px}.choose .cntBoxMainCenter01 a{height:27px;display:inline-block;padding:0 0 0 5px}.choose .cntBoxMainCenter01 a input[type=checkbox]{vertical-align:middle;margin:0 5px 0 0}.choose .cntBoxMainCenter01 ul{padding:0 20px}.choose .cntBoxMainCenter01 li{float:left}.choose .cntBoxMainCenter02{width:100%;max-width:388px;z-index:9999;background-color:#fff;border:1px solid #ead483;position:relative}.choose .cntBoxMainCenter02 ul{padding:0}.choose .cntBoxMainCenter02 ul li{width:100%;float:left}.choose .cntBoxMainCenter02 ul li.lifocus{border:#d5d5d5 solid 1px;border-left:0;border-right:0}.choose .cntBoxMainCenter02 ul li.lifocus>a{background:#ededed}.choose .cntBoxMainCenter02 a{height:26px;display:block;padding:2px 10px}.choose .cntBoxMainCenter02 a:hover{border:0}.choose .cntBoxMainCenter02 .close_wrap{height:22px;background:#fffbeb;position:relative}.choose .cntBoxMainCenter02 .close_wrap .del{position:absolute;right:10px;top:5px;z-index:1111;width:12px;height:12px;padding:0;background-position:-7px -195px}.choose .cntBoxMainCenter02 .close_wrap .del:hover{background-position:-7px -215px}.choose .cntBoxMainCenter03{position:relative;background:#f7f7f7}.choose .cntBoxMainCenter03 ul li{width:192px;float:left;border:0}.choose .cntBoxMainCenter03 a{height:26px;padding:2px 10px;background:0}.choose .cntBoxMainCenter03 a:active{background-color:#f6c739;color:#fff}.choose .cntBoxMainCenter04{width:200px;z-index:99999;background-color:#e5ffbc;padding:3px;border:1px solid #48AE50;-moz-border-radius:8px;webkit-border-radius:8px;position:absolute}.choose .cntBoxMainCenter04 a{height:27px;padding:6px 15px 0 10px;color:#016200;background:0}.choose .cntBoxMainCenter04 a:hover{border:0;font-weight:400;color:#fff;-moz-border-radius:8px;webkit-border-radius:8px;font-weight:700}.choose .cntBoxMainCenter04 .del,.choose .cntBoxMainCenter04 .del a:hover{position:absolute;left:175px;top:5px;z-index:1111;width:0;height:12px;-moz-border-radius:8px;webkit-border-radius:8px}.choose .cntBoxMainCenter04 ul li{width:200px}.industryBtn{margin:10px 0 0 -25px;*margin:9px 0 0 -25px;width:18px;height:23px;border:0;background:#fff url(/public/image/industry/searchbg.png) no-repeat 0 5px}")}),define("industry/industry.css",[],function(){seajs.importStyle(".del{background:url(/public/image/industry/close.gif) no-repeat}.choose{width:100%;position:relative;z-index:580}.choose .cntBoxMain{color:#7d5d4e;position:absolute;z-index:999;right:87px;top:-73px;width:450px;min-height:48px;z-index:10}.choose .cntBoxMain img{float:none}.choose .cntBoxMainCenter{border:1px solid #85c9ff;background-color:#d9e5ee}.choose .cntBoxMainCenter #titlebar{background:#5aa3dd;color:#fff;font-size:14px;font-family:SinSun;font-weight:400}.choose .cntBoxMainCenter p{width:270px}.choose .btn{background:url(/public/image/industry/choose_btn.png) no-repeat;border:0;width:57px;height:22px;color:#fff}.choose .cntBoxMainCenter .text{width:200px;height:22px}.choose ul{list-style:none;padding:0;margin:0;overflow:hidden}.choose ul li{width:200px;line-height:27px}.choose .del{position:absolute;right:100px;top:-60px;cursor:pointer;z-index:9999;display:inline-block;width:11px;height:11px;background-position:-7px -235px}.choose .cntBoxMainCenter01{width:447px;margin:10px 0 0;min-height:300px}.choose .cntBoxMainCenter01 a{height:27px;display:inline-block;padding:0 0 0 5px}.choose .cntBoxMainCenter01 a input[type=checkbox]{vertical-align:middle;margin:0 5px 0 0}.choose .cntBoxMainCenter01 ul{padding:0 20px}.choose .cntBoxMainCenter01 li{float:left}.choose .cntBoxMainCenter02{width:100%;max-width:388px;z-index:9999;background-color:#fff;border:1px solid #ead483;position:relative}.choose .cntBoxMainCenter02 ul{padding:0}.choose .cntBoxMainCenter02 ul li{width:100%;float:left}.choose .cntBoxMainCenter02 ul li.lifocus{border:#d5d5d5 solid 1px;border-left:0;border-right:0}.choose .cntBoxMainCenter02 ul li.lifocus>a{background:#ededed}.choose .cntBoxMainCenter02 a{height:26px;display:block;padding:2px 10px}.choose .cntBoxMainCenter02 a:hover{border:0}.choose .cntBoxMainCenter02 .close_wrap{height:22px;background:#fffbeb;position:relative}.choose .cntBoxMainCenter02 .close_wrap .del{position:absolute;right:10px;top:5px;z-index:1111;width:12px;height:12px;padding:0;background-position:-7px -195px}.choose .cntBoxMainCenter02 .close_wrap .del:hover{background-position:-7px -215px}.choose .cntBoxMainCenter03{position:relative;background:#f7f7f7}.choose .cntBoxMainCenter03 ul li{width:192px;float:left;border:0}.choose .cntBoxMainCenter03 a{height:26px;padding:2px 10px;background:0}.choose .cntBoxMainCenter03 a:active{background-color:#f6c739;color:#fff}.choose .cntBoxMainCenter04{width:200px;z-index:99999;background-color:#e5ffbc;padding:3px;border:1px solid #48AE50;-moz-border-radius:8px;webkit-border-radius:8px;position:absolute}.choose .cntBoxMainCenter04 a{height:27px;padding:6px 15px 0 10px;color:#016200;background:0}.choose .cntBoxMainCenter04 a:hover{border:0;font-weight:400;color:#fff;-moz-border-radius:8px;webkit-border-radius:8px;font-weight:700}.choose .cntBoxMainCenter04 .del,.choose .cntBoxMainCenter04 .del a:hover{position:absolute;left:175px;top:5px;z-index:1111;width:0;height:12px;-moz-border-radius:8px;webkit-border-radius:8px}.choose .cntBoxMainCenter04 ul li{width:200px}.industryBtn{margin:10px 0 0 -25px;*margin:9px 0 0 -25px;width:18px;height:23px;border:0;background:#fff url(/public/image/industry/searchbg.png) no-repeat 0 5px}")}),define("industry/industry",[],function(a,b){var c=$("<div/>").attr({id:"industryTpl"}).load("/public/tpl/industry.html");a.async("./industry.css"),$.extend({weiboTree:function(a){var b,c={multiSelect:!0,callback:null,showTips:!0,forceQuestionType:!1,noteTreeId:"weiboTreeSelectedList",questionNoteTreeId:"weiboTreeSelectedQuestionList",mainDiv:"#weiboTree-main",treeDiv:"#weiboTree",selectedDiv:"#weiboTree-selectedList",tipsDiv:"#weiboTree-tipsArea",tipsQuestionDiv:"#weiboTree-tipsArea-question",searchDiv:"#weiboTree-searchArea",statusDiv:"#weiboTree-status",notFoundDiv:"#weiboTree-notFound",saveBtn:"#weiboTree-saveBtn",tradeBtn:"#weiboTree-tradeBtn",corpBtn:"#weiboTree-corpBtn",questionBtn:"#weiboTree-questionBtn",tradeBtnSOn:"#weiboTree-tradeBtn-small-on",tradeBtnSOff:"#weiboTree-tradeBtn-small-off",corpBtnSOn:"#weiboTree-corpBtn-small-on",corpBtnSOff:"#weiboTree-corpBtn-small-off",closeBtn:"#weiboTree-closeBtn"},d={},e=this,f=new Array,g=!1,h=[],i="";return $.extend(d,c,a),$.extend(this,{printSetting:function(){console.log(d)},init:function(){e.close(),$(d.selectedDiv).empty(),$(d.selectedDiv).append("<ul/>"),$(d.closeBtn).unbind("click").click(function(){e.save(),e.close()}),$(d.tradeBtn+","+d.tradeBtnSOn+","+d.tradeBtnSOff).unbind("click").click(function(){e.trade()}),$(d.corpBtn+","+d.corpBtnSOn+","+d.corpBtnSOff).unbind("click").click(function(){e.corp()}),$(d.questionBtn).unbind("click").click(function(){g=!0,$(d.tipsQuestionDiv).hide(),e.getQuestionList()}),f.trade=[],f.corp=[],d.source&&d.source.tree&&(i=d.source.tree,i&&i.length>0&&$(d.selectedDiv).empty().append(i),d.source.queryType&&(b=d.source.queryType)),$(d.searchDiv+" :text").unbind("keydown").bind("keydown",function(a){13==a.keyCode&&e.innerSearch($.trim(this.value))}),$(d.searchDiv+" :text").val("")},trade:function(){b="trade",e.getList(),$(d.searchDiv+" :button").unbind("click").click(function(){e.innerSearch($(this).val())}),$(d.saveBtn).unbind("click").click(function(){e.save()}),upgTool.removeErrorMsg()},corp:function(){b="corp",e.getList(),$(d.searchDiv+" :button").unbind("click").click(function(){e.search($(this).val())}),$(d.saveBtn).unbind("click").click(function(){e.save()})},open:function(a){upgTool.removeErrorMsg(),g=!1,$(d.treeDiv+" .pageNav").remove(),e.isQuestionExists()&&e.isDataExists()&&!a||(e.isDataExists()?($(d.tipsDiv).hide(),$(d.tipsQuestionDiv).show(),$(d.treeDiv).show(),$(d.searchDiv).hide(),$(d.notFoundDiv).hide(),e.isQuestionExists()?(g=!0,e.getQuestionList()):e.openQuestion()):($(d.tipsDiv).show(),$(d.tipsQuestionDiv).hide(),$(d.statusDiv).length>0&&$(d.statusDiv).show(),$(d.treeDiv).show(),$(d.searchDiv).hide(),$(d.notFoundDiv).hide()),d.showTips||e.setTreeDivPos())},setTreeDivPos:function(){var a=function(a){var b=$(window),c=(a.offset(),Math.round(Math.max(b.width()-a.outerWidth(),0)/2)),d=Math.round(Math.max(b.height()-a.outerHeight(),0)/3)+b.scrollTop();return{top:d,left:c}},b=a($(d.treeDiv));$(d.treeDiv).css({position:"absolute",top:b.top,left:"-350px"}),$(d.searchDiv+" :button").css({}),$(d.treeDiv).css({zIndex:upgTool.getHighestZIndex()+2})},openQuestion:function(){$(d.saveBtn).unbind("click").click(function(){e.save()}),$(d.searchDiv).hide(),$(d.notFoundDiv).hide(),$(d.treeDiv+" .pageNav").remove(),$(".cntBoxMainCenter01").remove(),$(d.treeDiv).show(),$(d.saveBtn).hide(),d.showTips||e.setTreeDivPos(),d.showTips?($(d.tipsDiv).hide(),$(d.tipsQuestionDiv).show(),"trade"==b?($(d.tradeBtnSOn).show(),$(d.tradeBtnSOff).hide(),$(d.corpBtnSOn).hide(),$(d.corpBtnSOff).show()):($(d.tradeBtnSOn).hide(),$(d.tradeBtnSOff).show(),$(d.corpBtnSOn).show(),$(d.corpBtnSOff).hide())):($(d.tipsDiv).hide(),$(d.tipsQuestionDiv).hide())},getList:function(){$(d.saveBtn).show(),$(d.tipsDiv).hide(),$(d.tipsQuestionDiv).hide(),$(d.searchDiv).show(),$(d.notFoundDiv).hide(),d.target.questionStr.val(""),d.target.qType.val("");var a=d.target.questionStr.data("weiboTree");a&&(a.queryType!=b?(g=!1,$(d.statusDiv+" > img").attr("src","/public/image/industry/choose_img1.png"),d.target.questionStr.removeData("weiboTree"),$(d.selectedDiv+" > ul").empty(),h=[]):(e.isQuestionExists()&&(h=d.target.questionStr.data("weiboTree").questionIds),$(d.selectedDiv).html(a.tree))),e.nextLv(null,b)},nextLv:function(a,c,g,h){var i=0,j=0,k={queryType:c};if(a?(a=$(a),i=a.attr("level"),j=a.val(),$.extend(k,{id:j}),($(a).prop("checked")||h)&&($(a).after('<img src="/public/image/load/icon_waiting.gif" width="15">'),$(a).hide())):$(d.mainDiv).html('<img src="/public/image/load/icon_waiting.gif">'),"corp"==c){g=null==g?0:g;var l=0==i?$(d.searchDiv+" :input").val():"";$.extend(k,{p:g,limit:"10",term:l})}var m=parseInt(i)+1;if((2==m||3==m||4==m)&&$(".cntBoxMainCenter0"+m).remove(),1!=i&&3!=i||!a||a.prop("checked")){var n={clickedObj:a,type:c,curLv:i,objVal:j,nextLv:m,postOpt:k};("trade"==b||"corp"==b&&i>0)&&f[b].length>0&&f[b][j]?($.extend(n,{json:f[b][j]}),f[b][j].data&&f[b][j].data.length>0?e.doNextLv(n):(a.show(),a.siblings("img").remove())):$.post("/index.php/Financing/CorpFinancing/api_trade",k,function(c){"1"==c.boolen&&("corp"==b&&(c=c.data,0==i&&($(d.notFoundDiv).show(),c&&c.data&&0==c.data.length?($(d.notFoundDiv).html("找不到企业。请修改关键字").show(),$(d.mainDiv+" > img").remove(),$(d.saveBtn).hide()):($(d.notFoundDiv).html("找到 "+c.count+" 家企业。").show(),$(d.saveBtn).show()))),f[b][j]=c,$(d.treeDiv).data("loadedData",f),c&&c.data&&c.data.length>0?($.extend(n,{json:c}),e.doNextLv(n)):(a.show(),a.siblings("img").remove()))},"json")}},doNextLv:function(a){function c(a){var b=$(a).children(":checkbox");b.prop("checked")&&($(a).siblings("div .cntBoxMainCenter0"+(k+1)).is(":visible")||($(a).siblings("div .cntBoxMainCenter0"+(k+1)).remove(),f(b)))}function f(a){e.doSelect(a),e.nextLv(a,h),$(d.treeDiv).find(":checkbox[level='"+k+"']").parent("a").removeClass("afocus"),$(a).prop("checked")&&$(a).parent("a").addClass("afocus"),2==k&&($(a).prop("checked")?$(a).parent("a").parent("li").addClass("lifocus"):$(a).parent("a").parent("li").removeClass("lifocus"))}var g=a.clickedObj,h=a.type,i=a.curLv,j=a.objVal,k=a.nextLv,l=(a.postOpt,a.json),m=$("<div/>").addClass("cntBoxMainCenter0"+k),n=$("<div/>").addClass("close_wrap");1==i&&m.addClass("dn");var o=$("<a/>").addClass("del");o.click(function(){m.remove()}),1==i&&"132"==j&&(m.css({width:"500px","max-width":"500px",height:"300px",overflow:"auto"}),o.css({left:"470px"})),(2==k||4==k)&&m.append(n.append(o));var p=$("<ul/>");m.append(p);for(var q=0;q<l.data.length;q++){var r=0;1==k?r=10:3==k?r=12:4==k&&(r=10);var s="corp"==h?l.data[q].corp_name:l.data[q].trade_name_cn,t=l.data[q].id,u=$("<label></label>").attr("for",t).html(s);r>0&&u.attr("textlength",r),2==k&&u.addClass("acolor1");var v=$("<input/>").attr("type","checkbox").attr("id",l.data[q].id).attr("value",l.data[q].id).attr("parent",j).attr("level",k);if($(d.selectedDiv+" label[for='selected-"+l.data[q].id+"']").length>0){v.prop("checked","checked");var w=!0;$(d.selectedDiv+" label[for='selected-"+l.data[q].id+"']").attr("allowEdit")&&(w="true"===$(d.selectedDiv+" label[for='selected-"+l.data[q].id+"']").attr("allowEdit")?!0:!1),w||v.prop("disabled",!0)}v.click(function(){f(this)});var x=$("<a/>").append(v).append(u),y=$("<li/>").append(x);p.append(y),v.parent("a").hover(function(){0==$(this).find("img").length&&c(this)},function(){})}if(upgTool.textLength(m),0==i)$(d.mainDiv).html(m);else{g.show(),g.siblings("img").remove();var x=g.parent("a");x.after(m);var z=x.position();if(2==k){{var A=x.offset().left+x.innerWidth()+m.outerWidth()>$("div.main_area").outerWidth()+$("div.main_area").position().left?!0:!1;A?"-216px":z.left+x.innerWidth()}m.css({top:z.top,left:z.left+x.innerWidth(),position:"absolute"})}}if(m.show(),"corp"==b){var B=$("<div/>").addClass("fl").addClass("pageNav").css({"padding-left":"185px","padding-top":"10px",cursor:"pointer"}).html("上一页").click(function(){e.nextLv(null,b,l.nowPage-1)}),C=$("<div/>").addClass("fr").addClass("pageNav").css({"padding-right":"30px","padding-top":"10px",cursor:"pointer"}).html("下一页").click(function(){e.nextLv(null,b,l.nowPage+1)});l.nowPage+1<=l.totalPages&&m.after(C),l.nowPage-1>=1&&m.after(B)}},doSelect:function(a){if(a=$(a),a.prop("checked")){if($(d.selectedDiv+" label[for='selected-"+a.val()+"']").length<=0){d.multiSelect||$(d.treeDiv).find(":checkbox[level='"+a.attr("level")+"'][id!='"+a.attr("id")+"']").each(function(){$(this).removeAttr("checked"),e.doSelect(this)});var b=$(d.treeDiv).find(":checkbox[id='"+a.attr("parent")+"']");b.prop("checked")||(b.prop("checked","checked"),e.doSelect(b));var c=0==a.attr("parent")?"":" class='leaf'",f=a.siblings("label").attr("full-text")?a.siblings("label").attr("full-text"):a.siblings("label").html(),g="<li"+c+'><div></div><label for="selected-'+a.val()+'">'+f+"</label></li>",h=$(d.selectedDiv+" label[for='selected-"+a.attr("parent")+"']");0==h.length?$(d.selectedDiv+" > ul").append(g):(0==h.siblings("ul").length&&h.parent("li").append("<ul/>"),h.siblings("ul").append(g))}}else $(d.selectedDiv+" label[for='selected-"+a.val()+"']").parent("li").remove(),2==a.attr("level")&&($(d.treeDiv).find(":checkbox[parent='"+a.attr("id")+"']").removeAttr("checked"),$(".cntBoxMainCenter04").remove())},getQuestionList:function(){g=!0,e.isQuestionExists()?$(d.saveBtn).show():$(d.saveBtn).hide(),e.nextQuestionLv(null);var a=d.target.questionStr.data("weiboTree");a&&$(d.selectedDiv).html(a.tree)},nextQuestionLv:function(a){var b=0,c=0,f=parseInt(b)+1,g=$("<div/>").addClass("cntBoxMainCenter01"),h=$("<ul/>");g.append(h),a||$(d.mainDiv).html(g),$.post("/index.php",{app:"home",mod:"User",act:"getQuestionTypeByAjax"},function(a){if("1"==a.boolen){var b=[];if(e.isQuestionExists())b=d.target.questionStr.data("weiboTree").questionIds;else if(d.source&&d.source.questions){var i=d.source.questions;$(i).find("li>label").each(function(){b.push({id:$(this).attr("qid"),name:$(this).html(),allowEdit:$(this).attr("allowEdit")})})}for(var j=0;j<a.data.length;j++){var k=$("<label></label>").attr("for",a.data[j].id).html(a.data[j].type_name);k.attr("textlength","10");var l=$("<a/>").append(k);l.hover(function(){$(d.treeDiv+" .cntBoxMainCenter02").hide(),$(d.treeDiv).find("a").removeClass("afocus"),$(this).siblings("div.cntBoxMainCenter02").show(),$(this).addClass("afocus")},function(){});var m=$("<li/>").append(l);if(h.append(m),a.data[j].nextList.length>0){var n=$("<div/>").addClass("cntBoxMainCenter02").addClass("dn"),o=l.position();n.css({top:o.top,left:o.left+l.innerWidth(),position:"absolute"});var p=$("<div/>").addClass("close_wrap"),q=$("<a/>").addClass("del");q.click(function(){$(this).parent(".cntBoxMainCenter02").hide()}),q.append(p);var r=$("<ul/>");n.append(r),l.after(n),$.each(a.data[j].nextList,function(a,e){var g=$("<label></label>").attr("for",e.id).html(e.type_name),h=!1,i=!0;for(qidCount in b)b[qidCount].id==e.id&&(h=!0,i="false"===b[qidCount].allowEdit?!1:!0);var j=$("<input/>").attr("type","checkbox").attr("id",e.id).attr("value",e.id).attr("parent",c).attr("level",f).attr("name","questionId");h&&(j.prop("checked","checked"),i||j.prop("disabled",!0)),j.click(function(){$(d.saveBtn).show()});var k=$("<a/>").append(j).append(g),l=$("<li/>").append(k);r.append(l)})}}initTextlength(g)}},"json")},save:function(){function a(b,d){d=d||[],b.children("li").each(function(){$(this).children("label[for^='selected']").each(function(){var b=$(this).siblings("ul");if(b.length>0&&$("li",b).length>0)a(b,d);else{var e={};e.id=$(this).attr("for").replace("selected-",""),e.name=$(this).attr("full-text")?$(this).attr("full-text"):$(this).html(),e.allowEdit=$(this).attr("allowEdit"),c.push(e)}})})}var c=[],f=h,i="",j=$(d.selectedDiv+" > ul");a(j),$("input[name='questionId']").length>0?$("input[name='questionId']:checked").length>0&&(f=[],$("input[name='questionId']:checked").each(function(){var a={};a.id=$(this).val(),a.name=$(this).siblings("label").html(),a.allowEdit=$(this).prop("disabled")?"false":"true",f.push(a)})):d.source&&d.source.questions&&(f=[],$(d.source.questions).find("li>label").each(function(){f.push({id:$(this).attr("qid"),name:$(this).html(),allowEdit:$(this).attr("allowEdit")})}));for(var k=0;k<c.length;k++){i.length>0&&(i+="|");var l=[];$.each(f,function(a){var b="undefined"==typeof f[a].allowEdit||"true"===f[a].allowEdit?f[a].id:0;l.push(b)});var m="undefined"==typeof c[k].allowEdit||"true"===c[k].allowEdit?c[k].id:0;if("undefined"==typeof c[k].allowEdit||"true"===c[k].allowEdit||l.length>0){var n=!0;for(z in l)0!=l[z]&&(n=!1);0==m&&n||(i+=m+"="+l.join(","))}}var o={};if(c.length>0||d.forceQuestionType){var p="";$.each(f,function(a,b){p+="<li>"+b.name+"</li>"}),p='<div id="'+d.questionNoteTreeId+'"><ul>'+p+"</ul></div>";var q='<div id="'+d.noteTreeId+'" class="dn"><table class="tableTreeView"><tr>';q+='<td class="tableTreeView_left tabletdtreeviewList" valign="top">'+$(d.selectedDiv).html()+"</td>",f.length>0&&d.showTips&&(q+='<td class="tableTreeView_right" valign="top">'+p+"</td>"),q+="</tr></table></div>",$.extend(o,{tree:$(d.selectedDiv).html(),queryType:b,questionStr:i,questionIds:f,noteTree:q,noteQuestion:p,result:c}),d.target.questionStr.val(i),d.target.qType.val(b),d.target.questionStr.data("weiboTree",o),$(d.statusDiv).length>0&&($(d.statusDiv).attr("note","weiboTreeSelectedList"),$(d.statusDiv).attr("note-options",'{"gravity":"nw"}'),$("#weiboTreeSelectedList").remove(),$(d.statusDiv).after(q),initNote($(d.statusDiv))),!g&&d.showTips?e.openQuestion():e.close()}var r;if(d.callback&&"function"==typeof d.callback.fun&&($.extend(o,d.callback),r=d.callback.fun(o)),$(d.statusDiv).length>0&&c.length>0){var s=$(d.statusDiv+" > img");if("trade"==b){var t=g&&f.length>0?"/public/image/industry/choose_img11.png":"/public/image/industry/choose_img8.png";s.attr("src",t),s.attr("binded")||(s.attr("binded","binded"),s.click(function(){e.open(!0)}))}else if("corp"==b){var t=g&&f.length>0?"/public/image/industry/choose_img10.png":"/public/image/industry/choose_img7.png";s.attr("src",t),s.attr("binded")||(s.attr("binded","binded"),s.click(function(){e.open(!0)}))}}},innerSearch:function(){var a=$(d.searchDiv+" :input").val(),b=0,c=0;$("li#noDataSearchLi",$(d.treeDiv+" .cntBoxMainCenter01 > ul")).remove(),$(d.treeDiv+" .cntBoxMainCenter02").remove(),$(d.treeDiv+" .cntBoxMainCenter01 > ul > li").show(),$(d.treeDiv+" .cntBoxMainCenter01 > ul > li").each(function(){if(c++,0==a.length)$(this).show();else{var d=$("label",this).attr("full-text");d?d.indexOf(a)<0&&($(this).hide(),b++):$("label",this).is(":contains('"+a+"')")||(b++,$(this).hide())}}),b==c&&$(d.treeDiv+" .cntBoxMainCenter01 > ul").append($('<li id="noDataSearchLi"/>').html("无数据"))},search:function(){e.nextLv(null,b)},isDataExists:function(){return d.target.questionStr.data("weiboTree")&&d.target.questionStr.data("weiboTree").questionStr.length>0?!0:!1},isQuestionExists:function(){return d.target.questionStr.data("weiboTree")&&d.target.questionStr.data("weiboTree").questionIds.length>0?!0:!1},close:function(){$(".cntBoxMainCenter01").remove(),g||$(d.selectedDiv+" > ul").empty(),$(d.saveBtn).hide(),$(d.treeDiv).hide(),$(d.searchDiv+" :input").val(),$(d.statusDiv).length>0&&(d.target.questionStr.data("weiboTree")?d.target.questionStr.data("weiboTree").questionStr.length<=0&&$(d.statusDiv).hide():$(d.statusDiv).hide())},reset:function(){$(d.statusDiv).length>0&&($(d.statusDiv+" > img").attr("src","/public/image/industry/choose_img1.png"),$(d.statusDiv).hide()),d.target.questionStr.removeData("weiboTree"),d.target.questionStr.val(""),d.target.qType.val(""),$(d.selectedDiv+" > ul").empty(),e.close()},destory:function(){$(d.closeBtn).unbind("click"),$(d.tradeBtn).unbind("click"),$(d.corpBtn).unbind("click"),$(d.saveBtn).unbind("click"),e.close()}}),this}}),b.tpl=c});